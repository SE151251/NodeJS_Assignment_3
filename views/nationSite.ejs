<!DOCTYPE html>
<html lang="en">
<%- include ('./patials/head') %>

    <body>
        <div class="container is-fluid" style="display:flex; justify-content: center;">
            <div class="columns">
                <div class="column">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Nations</th>
                                <th>description</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <% nations.forEach(function(nation) { %>
                                <tr>
                                    <td>
                                        <%= nation.name %>
                                    </td>
                                    <td>
                                        <%= nation.description %>
                                    </td>
                                    <td>

                                        <div class="dropdown">
                                            <div class="dropdown-trigger">
                                                <button class="button" aria-haspopup="true"
                                                    aria-controls="dropdown-menu3">
                                                    <span class="icon ">
                                                        <i class="fa-solid fa-ellipsis-vertical"></i>
                                                    </span>
                                                </button>
                                            </div>
                                            <div class="dropdown-menu" id="dropdown-menu" role="menu">
                                                <div class="dropdown-content" style="width: 100px">
                                                    <a class="dropdown-item"
                                                        href="/nations/edit/<%=nation.id %>">Edit</a>
                                                    <a class="dropdown-item" href="/nations/delete/<%=nation.id %>"
                                                        onclick="return confirm('Are you sure ???')">Delete</button></a>

                                                </div>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                                <% }) %>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </body>
    <script>
    // Show error message
    <% if (errorMess) { %>
            window.onload = function() {
                Toastify({
                    text: "<%=errorMess %>",
                    duration: 5000,
                    gravity: "bottom",
                    position: "left",
                    backgroundColor: "linear-gradient(to right, red , yellow)",
                    stopOnFocus: true,
                }).showToast();

                setTimeout(function () {
                    Toastify.hideToast();
                }, 3000);
            }
        <% } %>

            document.addEventListener('DOMContentLoaded', function () {
                // Get all "dropdown" elements
                var dropdowns = Array.prototype.slice.call(document.querySelectorAll('.dropdown'), 0);

                // Loop through all dropdowns and bind click event
                dropdowns.forEach(function (dropdown) {
                    dropdown.addEventListener('click', function (event) {
                        event.stopPropagation();
                        dropdown.classList.toggle('is-active');
                    });
                });

                // Close dropdowns when clicking outside
                document.addEventListener('click', function (event) {
                    closeDropdowns();
                });

                function closeDropdowns() {
                    dropdowns.forEach(function (dropdown) {
                        dropdown.classList.remove('is-active');
                    });
                }
            });
    </script>

</html>